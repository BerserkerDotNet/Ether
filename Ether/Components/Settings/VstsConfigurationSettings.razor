<If Condition="VstsDataSource == null">
    <Then>
        <Spinner Text="Loading..." />
    </Then>
    <Else>
        <EditForm Model="VstsDataSource" OnValidSubmit="@(async () => await OnUpdate.InvokeAsync(VstsDataSource))">
            <Card Title="Vsts configuration" AdditionalClasses="card-600">
                <Body>
                    <div class="form-group">
                        <label>Instance Name</label>
                        <InputText Class="form-control" @bind-Value="VstsDataSource.InstanceName" />
                        <ValidationMessage For="@(() => VstsDataSource.InstanceName)" />
                    </div>
                    <div class="form-group">
                        <label>Default Token</label>
                        <SelectInput Class="form-control" @bind-Value="VstsDataSource.DefaultToken" Options="IdentitiesOptions" />
                        <ValidationMessage For="@(() => VstsDataSource.DefaultToken)" />
                    </div>
                </Body>
                <Footer><button type="submit" class="btn btn-success btn-fill pull-right">Save</button></Footer>
            </Card>
        </EditForm>
    </Else>
</If>

@code
{
    [Parameter] VstsDataSourceViewModel VstsDataSource { get; set; }
    [Parameter] Dictionary<Guid?, string> IdentitiesOptions { get; set; }
    [Parameter] EventCallback<VstsDataSourceViewModel> OnUpdate { get; set; }
}